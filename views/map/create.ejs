
 

<div class="container mt-5">
  <% if (flash.error && flash.error.length > 0) { %>
    <div class="alert alert-danger"><%= flash.error[0] %></div>
  <% } %>
  <h1>新建地图配置</h1>
  
  <!-- 添加缺失的form标签 -->
  <form action="/maps/create" method="post">
    <div class="mb-3">
      <label class="form-label">地图名称</label>
      <input type="text" class="form-control" name="map_name" required>
    </div>
    
    <div class="mb-3">
      <label class="form-label">地图类型</label>
      <select class="form-select" name="map_type" required>
        <option value="新手村">新手村</option>
        <option value="野外">野外</option>
        <option value="副本">副本</option>
      </select>
    </div>
    
    <div class="mb-3">
      <label class="form-label">安全区域</label>
      <div class="form-check">
        <input class="form-check-input" type="radio" name="is_safe_zone" value="1" checked>
        <label class="form-check-label">是</label>
      </div>
      <div class="form-check">
        <input class="form-check-input" type="radio" name="is_safe_zone" value="0">
        <label class="form-check-label">否</label>
      </div>
    </div>
    
    // 新增以下字段
    <div class="mb-3">
      <label class="form-label">刷怪配置(JSON格式)</label>
      <textarea class="form-control" name="spawn_config" rows="3" required 
        placeholder='示例：{"monsters": [{"name": "哥布林", "level": 5, "spawn_rate": 0.3}]}'></textarea>
      <div class="form-text text-danger">
        <% if (flash.error && flash.error.includes('JSON格式')) { %>
          <%= flash.error.find(e => e.includes('JSON格式')) %>
        <% } %>
      </div>
    </div>
    
    <div class="mb-3">
      <label class="form-label">解锁等级</label>
      <input type="number" class="form-control" name="unlock_level" min="1" required>
    </div>
    
    <div class="mb-3">
      <label class="form-label">图标路径</label>
      <input type="text" class="form-control" name="icon_path" required>
    </div>
    
    <div class="mt-4">
      <button type="submit" class="btn btn-primary">创建</button>
      <a href="/maps" class="btn btn-secondary ms-2">返回列表</a>
    </div>
  </form> <!-- 补充闭合标签 -->
</div>

  
<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.bundle.min.js"></script>
